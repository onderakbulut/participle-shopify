<nav 
    id="navbar-mobile" 
    class="d-lg-none bg-white py-6">
    <div class="container">
        <div class="row align-items-center">
            <div class="col">
                <a href="javascript:void(0)" class="menu-button align-bottom push-menu" id="menuButton">
                    <span class="burger-icon"></span>
                </a>
            </div>
            <div class="col-auto">
                <a class="navbar-brand mx-auto py-0 col text-center" href="{{ routes.root_url }}">
                    {% if section.settings.logo %}
                        {% assign logo_height_x2 = section.settings.logo_height_mobile | times: 2 %}
                        <img
                            class="img-fluid"
                            src="{{ section.settings.logo | image_url }}" 
                            alt="{{ shop.name }}"
                            loading="lazy">
                    {% else %}
                        <span class="fs-3">
                            {{ shop.name }}
                        </span>
                    {% endif %}
                </a>
            </div>
            <div class="col">
                <div class="d-flex col justify-content-end">
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item">
                            <a
                                class="nav-link" 
                                href="#offcanvas-search" 
                                data-bs-toggle="offcanvas"
                                aria-controls="offcanvas-search" 
                                role="button"
                                aria-label="{{ 'general.accessibility.search' | t }}">
                                <svg class="align-text-bottom" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a 
                            class="cart-icon nav-link" 
                            href="#offcanvas-cart" 
                            data-bs-toggle="offcanvas" 
                            aria-controls="offcanvas-cart" 
                            aria-label="{{ 'general.accessibility.cart' | t }} {{ cart.item_count }}"
                            role="button">
                            <div class="position-relative ms-10px">
                                <svg class="align-text-bottom" width="17" height="21" viewBox="0 0 17 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="0.7" y="-0.7" width="9.73265" height="10.6604" rx="3.3" transform="matrix(1 0 0 -1 3.08398 10.661)" stroke="black" stroke-width="1.4"/>
                                    <rect x="0.300781" y="4.64014" width="16.699" height="15.7713" fill="black"/>
                                </svg>
                                <span 
                                    class="cart-count-badge badge"
                                    {% if cart.item_count == 0 %}hidden{% endif %}>
                                    {{ cart.item_count }}
                                </span>
                            </div>
                            
                        </a>          
                    </li>
                    </ul>
                    
                </div> 
            </div>
        </div>
    </div>
</nav>

<nav 
    id="navbar-desktop" 
    class="navbar d-none d-lg-block bg-white py-6">
    <div class="container">
        <div class="row align-items-center flex-grow-1">
            <div class="col">
                {% render 'navbar-menu' %}
            </div>
            <div class="col-auto">
                <a class="navbar-brand me-auto d-block" href="{{ routes.root_url }}">
                    {% if section.settings.logo %}
                        {% assign logo_height_x2 = section.settings.logo_height_desktop | times: 2 %}
                        <img
                            class="img-fluid"
                            src="{{ section.settings.logo | image_url }}" 
                            alt="{{ shop.name }}"
                            loading="lazy">
                    {% else %}
                        <span class="fs-3">
                            {{ shop.name }}
                        </span>
                    {% endif %}
                </a>
            </div>
            <div class="col">
                <ul class="nav nav-icons justify-content-end" aria-label="{{ 'general.accessibility.utility_icons' | t }}">
                    <li class="nav-item">
                        <a
                            class="nav-link" 
                            href="#offcanvas-search" 
                            data-bs-toggle="offcanvas"
                            aria-controls="offcanvas-search" 
                            role="button"
                            aria-label="{{ 'general.accessibility.search' | t }}">
                            {{ 'general.accessibility.search' | t }}
                            <div class="ms-10">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" class="align-text-bottom" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                            </div>
                        </a>
                    </li>
                    {% if shop.customer_accounts_enabled %}
                        <li class="nav-item">
                            <a 
                                class="nav-link {% if template.name == 'login' or template.name == 'account' %}active{% endif %}" 
                                aria-current="{% if template.name == 'login' or template.name == 'account' %}page{% endif %}" 
                                href="{{ routes.account_url }}"
                                aria-label="{{ 'general.accessibility.account' | t }}">
                                {{ 'customer.login.title' | t }}
                            </a>
                        </li>
                    {% endif %}
                    <li class="nav-item">
                        <a 
                            class="cart-icon nav-link" 
                            href="#offcanvas-cart" 
                            data-bs-toggle="offcanvas" 
                            aria-controls="offcanvas-cart" 
                            aria-label="{{ 'general.accessibility.cart' | t }} {{ cart.item_count }}"
                            role="button">
                            {{ 'cart.title' | t }}
                            <div class="position-relative ms-10">
                                <svg class="align-text-bottom" width="17" height="21" viewBox="0 0 17 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="0.7" y="-0.7" width="9.73265" height="10.6604" rx="3.3" transform="matrix(1 0 0 -1 3.08398 10.661)" stroke="black" stroke-width="1.4"/>
                                    <rect x="0.300781" y="4.64014" width="16.699" height="15.7713" fill="black"/>
                                </svg>
                                <span 
                                    class="cart-count-badge badge"
                                    {% if cart.item_count == 0 %}hidden{% endif %}>
                                    {{ cart.item_count }}
                                </span>
                            </div>
                           
                        </a>           
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>


{% render 'mobile-menu' %}

<script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": {{ shop.name | json }},
        {% if section.settings.logo %}
            "logo": {{ section.settings.logo | image_url: width: 500 | prepend: "https:" | json }},
        {% endif %}
        "sameAs": [
            {{ settings.social_facebook | json }},
            {{ settings.social_twitter | json }},
            {{ settings.social_instagram | json }},
            {{ settings.social_pinterest | json }},
            {{ settings.social_tiktok | json }},
            {{ settings.social_snapchat | json }},
            {{ settings.social_snapchat | json }},
            {{ settings.social_youtube | json }},
            {{ settings.social_linkedin | json }}
        ],
        "url": {{ request.origin | append: page.url | json }}
    }
</script>
  
{%- if request.page_type == 'index' -%}
    {% assign potential_action_target = request.origin | append: routes.search_url | append: "?q={search_term_string}" %}
    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "name": {{ shop.name | json }},
            "potentialAction": {
                "@type": "SearchAction",
                "target": {{ potential_action_target | json }},
                "query-input": "required name=search_term_string"
            },
            "url": {{ request.origin | append: page.url | json }}
        }
    </script>
{%- endif -%}

{% schema %}
{
    "name": "Navbar",
    "class": "sticky-top",
    "settings": [
        {
            "type": "header",
            "content": "General"
        },
        {
            "type": "link_list",
            "id": "menu_desktop",
            "label": "Menu",
            "default": "main-menu"
        },
        {
            "type": "header",
            "content": "Logo"
        },
        {
            "type": "image_picker",
            "id": "logo",
            "label": "Logo"
        },
        {
            "type": "header",
            "content": "Offcanvas menu"
        },
        {
            "type": "select",
            "id": "offcanvas_menu_header_bg",
            "label": "Header bg color",
            "default": "bg-dark text-white",
            "options": [
                { "group": "Inherit", "value": "", "label": "Body" },
                { "group": "Light", "value": "bg-white text-dark", "label": "White" },
                { "group": "Light", "value": "bg-light text-dark", "label": "Light" },
                { "group": "Dark", "value": "bg-primary text-white", "label": "Primary" },
                { "group": "Dark", "value": "bg-secondary text-white", "label": "Secondary" },
                { "group": "Dark", "value": "bg-dark text-white", "label": "Dark" },
                { "group": "Alert", "value": "bg-success text-white", "label": "Success" },
                { "group": "Alert", "value": "bg-warning text-dark", "label": "Warning" },
                { "group": "Alert", "value": "bg-danger text-white", "label": "Danger" },
                { "group": "Alert", "value": "bg-info text-white", "label": "Info" }
            ]
        },
        {
            "type": "link_list",
            "id": "menu_mobile",
            "label": "Mobile menu",
            "default": "main-menu"
        },
        {
            "type": "link_list",
            "id": "utilities_menu",
            "label": "Utilities menu"
        },
        {
            "type": "checkbox",
            "id": "offcanvas_menu_show_social_icons",
            "label": "Show social icons",
            "default": true
        }
    ],
    "blocks": [
        {
            "type": "logo_image",
            "name": "Mega image",
            "settings": [
                {
                    "type": "image_picker",
                    "id": "image",
                    "label": "Image"
                },
                {
                    "type": "text",
                    "id": "menu_position",
                    "label": "Select menu position",
                    "default": "1"
                }
            ]
        }
    ]
}
{% endschema %}